{"ast":null,"code":"import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\n// import groupsData from './groups.json'\n// interface GetGroupsResponse {\n//     result: 1 | 0,\n//     data?: Group[]\n//   }\n\n//   interface Group {\n//     \"id\": number,\n//     \"name\": string,\n//     \"closed\": boolean,\n//     \"avatar_color\"?: string,\n//     \"members_count\": number,\n//     \"friends\"?: User[]\n//   }\n\n//   interface User {\n//     \"first_name\": string,\n//     \"last_name\": string\n//   }\n\n//   interface GroupsState{\n//     groups:Group[],\n//     status:string, \n//     error:string\n\n//   }\n\n//   const initialState:GroupsState={\n//     groups:[],\n//     status:'', \n//     error:'',\n//   }\nconst initialState = {\n  groups: [],\n  status: '',\n  error: '',\n  privacyFilter: null,\n  avatarFilter: null,\n  friendsFilter: null\n};\nexport const fetchGroups = createAsyncThunk('groups/fetchGroups', async (_, {\n  rejectWithValue\n}) => {\n  // const response = await new Promise<GetGroupsResponse>(resolve => {\n  const response = await new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({\n        result: 1,\n        data: require('./groups.json')\n      });\n    }, 1000);\n  });\n\n  //   if (response.result) {\n  //       // console.log('data',response.data);\n  //     return response.data;\n  //   } else {\n  // state.error\n  //     throw new Error('Failed to fetch groups');\n\n  //   }\n  console.log('then', response.then());\n  if (!response.result) {\n    return rejectWithValue('server error');\n  }\n  return response.data;\n});\nconst groupsSlice = createSlice({\n  name: 'groups',\n  initialState,\n  //  {\n  //   groups: [],\n  //   status: '',\n  // //   error: null,\n  // error:''\n  // },\n  reducers: {\n    changePrivacyFilter(state, action) {\n      // state.groups=state.groups.filter((group)=>group.closed===action.payload);\n      // state.groups= state.groups2.filter((group)=>group.closed===action.payload);\n      state.privacyFilter = action.payload;\n    },\n    changeAvatarFilter(state, action) {\n      state.avatarFilter = action.payload;\n    },\n    changeFriendsFilter(state, action) {\n      state.friendsFilter = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchGroups.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchGroups.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.groups = action.payload || [];\n    }).addCase(fetchGroups.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    });\n  }\n});\n\n// action:PayloadAction<тип передаваемых данных>\n//PayloadAction<Group[]>\n\n// export const fetchGroups = createAsyncThunk(\n//     'groups/fetchGroups', \n//     async function(_, {rejectWithValue, getState}){\n//         // const games=getState().games;\n\n//         // const isCategory =games.genre ? `&category=${games.genre}` : \"\";\n//         // const isPlatform = games.platform ? `${games.platform}` : \"all\";\n//         // const isSort = games.sort ? `&sort-by=${games.sort}` : \"\";\n\n//             const response = await fetch('groups.json');\n//             // console.log('response', response.json())\n\n//             // const response= await fetch(`https://dummyjson.com/users/search?q`);\n//             if(!response.ok){\n//                return rejectWithValue('server error')\n//             }\n//             // const data= await response.json();\n//             const data= await response.json()\n//             const data2=groupsData;\n//             console.log('data', data);\n//             return data2;\n\n//     }\n//   )\n\n// export const fetchGame = createAsyncThunk(\n//     'game/fetchGame', \n//     async function(id, {rejectWithValue}){\n//             const response= await fetch(`https://free-to-play-games-database.p.rapidapi.com/api/game?id=${id}`, {\n//                     // method: \"GET\",\n//                     // headers: {\n\n//                     //     \"X-RapidAPI-Key\": \"2db4ae875cmshc804e07e556fbf9p1241acjsn750ba9cc2e97\",\n//                     //     \"X-RapidAPI-Host\": \"free-to-play-games-database.p.rapidapi.com\",\n//                     // },\n//             });\n\n//             if(!response.ok){\n//                return rejectWithValue('server error')\n//             }\n//             const data= await response.json();\n//             return data;\n\n//     }\n//   )\n\n// const groupSlice = createSlice({\n//   name: \"groups\",\n//   initialState: {\n// list: [],\n// platform:null, \n// sort:null,\n// genre:null, \n// loading:false , \n// error:null,\n// gameInfo:{},\n//     groups:{},\n//   },\n//   reducers: {\n// changeLoading(state, action){\n//     state.loading=action.payload;\n// }, \n// changeGenre(state, action){\n//     state.genre=action.payload\n// }, \n// changeSort(state, action){\n//     state.sort=action.payload\n// },\n// changePlatform(state, action){\n//     state.platform=action.payload\n// }, \n// clearFilters(state){\n//     state.platform=null;\n//     state.genre=null;\n//     state.sort=null;\n// },\n\n//   },\n//   extraReducers:{\n//     [ fetchTodos.pending]:(state )=>{\n//         // state.status='loading';\n//         // state.error=null;\n//     },\n//     [ fetchTodos.fulfilled]:(state, action)=>{\n//         // state.status='resolved';\n//         // state.todos=action.payload; \n//     },\n//     [ fetchTodos.rejected]:setError,\n//     [deleteTodo.rejected]: setError, \n//     [toggleStatus.rejected]:setError, \n//         },\n//   extraReducers:(builder)=>{\n//     builder \n//             .addCase(fetchGroups.pending, (state)=>{\n//               state.loading=true;\n//               state.error=null;\n//             })\n//             .addCase(fetchGroups.fulfilled, (state, action)=>{\n//               state.list=action.payload;\n//               state.loading=false;\n//             })\n//             .addCase(fetchGroups.pending, (state)=>{\n//                 state.loading=true;\n//                 state.error=null;\n//               })\n//               .addCase(fetchGroups.fulfilled, (state, action)=>{\n//                 state.gameInfo=action.payload;\n//                 state.loading=false;\n//               })\n//               .addMatcher(isError, (state )=>{\n//                 state.error=true;\n//                 state.loading= false;\n//               })\n//   }\n// });\n// function isError(action){\n\n//     return action.type.endsWith('rejected')\n//   }\n\nexport default groupsSlice.reducer;\nexport const {\n  changePrivacyFilter,\n  changeAvatarFilter,\n  changeFriendsFilter\n  // changePlatform, \n  // changeGenre, \n  // changeSort, \n  // changeLoading, \n  // clearFilters, \n} = groupsSlice.actions;","map":{"version":3,"names":["createSlice","createAsyncThunk","PayloadAction","initialState","groups","status","error","privacyFilter","avatarFilter","friendsFilter","fetchGroups","_","rejectWithValue","response","Promise","resolve","reject","setTimeout","result","data","require","console","log","then","groupsSlice","name","reducers","changePrivacyFilter","state","action","payload","changeAvatarFilter","changeFriendsFilter","extraReducers","builder","addCase","pending","fulfilled","rejected","message","reducer","actions"],"sources":["/Users/adel/Desktop/work/react/vk/vk_test2/src/store/groupSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\n// import groupsData from './groups.json'\n// interface GetGroupsResponse {\n//     result: 1 | 0,\n//     data?: Group[]\n//   }\n  \n//   interface Group {\n//     \"id\": number,\n//     \"name\": string,\n//     \"closed\": boolean,\n//     \"avatar_color\"?: string,\n//     \"members_count\": number,\n//     \"friends\"?: User[]\n//   }\n  \n//   interface User {\n//     \"first_name\": string,\n//     \"last_name\": string\n//   }\n\n//   interface GroupsState{\n//     groups:Group[],\n//     status:string, \n//     error:string\n   \n//   }\n\n//   const initialState:GroupsState={\n//     groups:[],\n//     status:'', \n//     error:'',\n//   }\n  const initialState={\n    groups:[],\n    status:'', \n    error:'',\n    privacyFilter:null,\n    avatarFilter:null,\n    friendsFilter:null\n  }\n\n\nexport const fetchGroups = createAsyncThunk('groups/fetchGroups', async (_, {rejectWithValue}) => {\n    // const response = await new Promise<GetGroupsResponse>(resolve => {\n      const response = await new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve({ result: 1, data: require('./groups.json') });\n        \n      }, 1000);\n    });\n  \n  //   if (response.result) {\n  //       // console.log('data',response.data);\n  //     return response.data;\n  //   } else {\n  // state.error\n  //     throw new Error('Failed to fetch groups');\n\n  //   }\n  console.log('then',response.then())\n    if(!response.result){\n\n      return rejectWithValue('server error')\n   }\n   \n   return response.data;\n  });\n  const groupsSlice = createSlice({\n    name: 'groups',\n    initialState,\n    //  {\n    //   groups: [],\n    //   status: '',\n    // //   error: null,\n    // error:''\n    // },\n    reducers: {\n      changePrivacyFilter(state, action){\n        // state.groups=state.groups.filter((group)=>group.closed===action.payload);\n        // state.groups= state.groups2.filter((group)=>group.closed===action.payload);\n        state.privacyFilter=action.payload\n      }, \n      changeAvatarFilter(state, action){\n        state.avatarFilter=action.payload\n      }, \n      changeFriendsFilter(state, action){\n        state.friendsFilter=action.payload\n      }\n    },\n    extraReducers:(builder)=> {\n      builder\n      .addCase(fetchGroups.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(fetchGroups.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.groups = action.payload || [];\n      })\n      .addCase(fetchGroups.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      });\n\n\n\n    },\n\n  });\n\n\n  // action:PayloadAction<тип передаваемых данных>\n  //PayloadAction<Group[]>\n  \n\n\n// export const fetchGroups = createAsyncThunk(\n//     'groups/fetchGroups', \n//     async function(_, {rejectWithValue, getState}){\n//         // const games=getState().games;\n\n//         // const isCategory =games.genre ? `&category=${games.genre}` : \"\";\n//         // const isPlatform = games.platform ? `${games.platform}` : \"all\";\n//         // const isSort = games.sort ? `&sort-by=${games.sort}` : \"\";\n\n  \n//             const response = await fetch('groups.json');\n//             // console.log('response', response.json())\n\n//             // const response= await fetch(`https://dummyjson.com/users/search?q`);\n//             if(!response.ok){\n//                return rejectWithValue('server error')\n//             }\n//             // const data= await response.json();\n//             const data= await response.json()\n//             const data2=groupsData;\n//             console.log('data', data);\n//             return data2;\n  \n//     }\n//   )\n\n// export const fetchGame = createAsyncThunk(\n//     'game/fetchGame', \n//     async function(id, {rejectWithValue}){\n//             const response= await fetch(`https://free-to-play-games-database.p.rapidapi.com/api/game?id=${id}`, {\n//                     // method: \"GET\",\n//                     // headers: {\n\n//                     //     \"X-RapidAPI-Key\": \"2db4ae875cmshc804e07e556fbf9p1241acjsn750ba9cc2e97\",\n//                     //     \"X-RapidAPI-Host\": \"free-to-play-games-database.p.rapidapi.com\",\n//                     // },\n//             });\n\n//             if(!response.ok){\n//                return rejectWithValue('server error')\n//             }\n//             const data= await response.json();\n//             return data;\n  \n//     }\n//   )\n\n// const groupSlice = createSlice({\n//   name: \"groups\",\n//   initialState: {\n    // list: [],\n    // platform:null, \n    // sort:null,\n    // genre:null, \n    // loading:false , \n    // error:null,\n    // gameInfo:{},\n//     groups:{},\n//   },\n//   reducers: {\n    // changeLoading(state, action){\n    //     state.loading=action.payload;\n    // }, \n    // changeGenre(state, action){\n    //     state.genre=action.payload\n    // }, \n    // changeSort(state, action){\n    //     state.sort=action.payload\n    // },\n    // changePlatform(state, action){\n    //     state.platform=action.payload\n    // }, \n    // clearFilters(state){\n    //     state.platform=null;\n    //     state.genre=null;\n    //     state.sort=null;\n    // },\n\n//   },\n//   extraReducers:{\n//     [ fetchTodos.pending]:(state )=>{\n//         // state.status='loading';\n//         // state.error=null;\n//     },\n//     [ fetchTodos.fulfilled]:(state, action)=>{\n//         // state.status='resolved';\n//         // state.todos=action.payload; \n//     },\n//     [ fetchTodos.rejected]:setError,\n//     [deleteTodo.rejected]: setError, \n//     [toggleStatus.rejected]:setError, \n//         },\n//   extraReducers:(builder)=>{\n//     builder \n//             .addCase(fetchGroups.pending, (state)=>{\n//               state.loading=true;\n//               state.error=null;\n//             })\n//             .addCase(fetchGroups.fulfilled, (state, action)=>{\n//               state.list=action.payload;\n//               state.loading=false;\n//             })\n//             .addCase(fetchGroups.pending, (state)=>{\n//                 state.loading=true;\n//                 state.error=null;\n//               })\n//               .addCase(fetchGroups.fulfilled, (state, action)=>{\n//                 state.gameInfo=action.payload;\n//                 state.loading=false;\n//               })\n//               .addMatcher(isError, (state )=>{\n//                 state.error=true;\n//                 state.loading= false;\n//               })\n//   }\n// });\n// function isError(action){\n\n//     return action.type.endsWith('rejected')\n//   }\n\nexport default groupsSlice.reducer;\nexport const {\n  changePrivacyFilter, \n  changeAvatarFilter, \n  changeFriendsFilter\n// changePlatform, \n// changeGenre, \n// changeSort, \n// changeLoading, \n// clearFilters, \n} = groupsSlice.actions;\n\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,EAAEC,aAAa,QAAQ,kBAAkB;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACE,MAAMC,YAAY,GAAC;EACjBC,MAAM,EAAC,EAAE;EACTC,MAAM,EAAC,EAAE;EACTC,KAAK,EAAC,EAAE;EACRC,aAAa,EAAC,IAAI;EAClBC,YAAY,EAAC,IAAI;EACjBC,aAAa,EAAC;AAChB,CAAC;AAGH,OAAO,MAAMC,WAAW,GAAGT,gBAAgB,CAAC,oBAAoB,EAAE,OAAOU,CAAC,EAAE;EAACC;AAAe,CAAC,KAAK;EAC9F;EACE,MAAMC,QAAQ,GAAG,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACxDC,UAAU,CAAC,MAAM;MACfF,OAAO,CAAC;QAAEG,MAAM,EAAE,CAAC;QAAEC,IAAI,EAAEC,OAAO,CAAC,eAAe;MAAE,CAAC,CAAC;IAExD,CAAC,EAAE,IAAI,CAAC;EACV,CAAC,CAAC;;EAEJ;EACA;EACA;EACA;EACA;EACA;;EAEA;EACAC,OAAO,CAACC,GAAG,CAAC,MAAM,EAACT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC;EACjC,IAAG,CAACV,QAAQ,CAACK,MAAM,EAAC;IAElB,OAAON,eAAe,CAAC,cAAc,CAAC;EACzC;EAEA,OAAOC,QAAQ,CAACM,IAAI;AACrB,CAAC,CAAC;AACF,MAAMK,WAAW,GAAGxB,WAAW,CAAC;EAC9ByB,IAAI,EAAE,QAAQ;EACdtB,YAAY;EACZ;EACA;EACA;EACA;EACA;EACA;EACAuB,QAAQ,EAAE;IACRC,mBAAmBA,CAACC,KAAK,EAAEC,MAAM,EAAC;MAChC;MACA;MACAD,KAAK,CAACrB,aAAa,GAACsB,MAAM,CAACC,OAAO;IACpC,CAAC;IACDC,kBAAkBA,CAACH,KAAK,EAAEC,MAAM,EAAC;MAC/BD,KAAK,CAACpB,YAAY,GAACqB,MAAM,CAACC,OAAO;IACnC,CAAC;IACDE,mBAAmBA,CAACJ,KAAK,EAAEC,MAAM,EAAC;MAChCD,KAAK,CAACnB,aAAa,GAACoB,MAAM,CAACC,OAAO;IACpC;EACF,CAAC;EACDG,aAAa,EAAEC,OAAO,IAAI;IACxBA,OAAO,CACNC,OAAO,CAACzB,WAAW,CAAC0B,OAAO,EAAGR,KAAK,IAAK;MACvCA,KAAK,CAACvB,MAAM,GAAG,SAAS;IAC1B,CAAC,CAAC,CACD8B,OAAO,CAACzB,WAAW,CAAC2B,SAAS,EAAE,CAACT,KAAK,EAAEC,MAAM,KAAK;MACjDD,KAAK,CAACvB,MAAM,GAAG,WAAW;MAC1BuB,KAAK,CAACxB,MAAM,GAAGyB,MAAM,CAACC,OAAO,IAAI,EAAE;IACrC,CAAC,CAAC,CACDK,OAAO,CAACzB,WAAW,CAAC4B,QAAQ,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACvB,MAAM,GAAG,QAAQ;MACvBuB,KAAK,CAACtB,KAAK,GAAGuB,MAAM,CAACvB,KAAK,CAACiC,OAAO;IACpC,CAAC,CAAC;EAIJ;AAEF,CAAC,CAAC;;AAGF;AACA;;AAIF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;AACA;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAef,WAAW,CAACgB,OAAO;AAClC,OAAO,MAAM;EACXb,mBAAmB;EACnBI,kBAAkB;EAClBC;EACF;EACA;EACA;EACA;EACA;AACA,CAAC,GAAGR,WAAW,CAACiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}